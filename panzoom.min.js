!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).panzoom=e()}(this,function(){"use strict";var u=function(){return(u=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function c(t,e,n,o){var i,r="number"==typeof t?t:t.clientX,s="number"==typeof e?e:t.clientY;return i=o?{clientX:r,clientY:s}:n?{x:r,y:s,clientX:r,clientY:s}:{x:r,y:s}}var l=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.toString=function(){return this.x+","+this.y},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.add=function(t){return new this.constructor(this.x+t.x,this.y+t.y)},t.prototype.sub=function(t){return new this.constructor(this.x-t.x,this.y-t.y)},t.prototype.mult=function(t){return new this.constructor(this.x*t,this.y*t)},t.prototype.div=function(t){return new this.constructor(this.x/t,this.y/t)},t.prototype.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},t.prototype.normalize=function(){var t=this.mag();return new this.constructor(this.x/t,this.y/t)},t}();function f(t){return t instanceof l}var a=function(){function t(t){this.element=t,this.handlers=[]}return t.prototype.add=function(t){this.handlers.push(t),this.element.addEventListener("wheel",t,{passive:!1})},t.prototype.remove=function(t){var e=this.handlers.indexOf(t);-1<e&&(this.element.removeEventListener("wheel",t),this.handlers.splice(e,1))},t.prototype.removeAll=function(){var e=this;this.handlers.forEach(function(t){return e.element.removeEventListener("wheel",t)}),this.handlers=[]},t}(),h=function(){function t(t,e){void 0===e&&(e={}),this.x=t.x,this.y=t.y,this.scale=1,this.options=u({},e)}return t.prototype.point=function(){return new l(this.x,this.y)},t.prototype.toString=function(){return this.x+","+this.y+","+this.scale},t.prototype.scale=function(t){return new this.constructor(new l(this.x*t,this.y*t),u(u({},this.options),{scale:this.scale*t}))},t.prototype.clone=function(){return new this.constructor(new l(this.x,this.y),u(u({},this.options),{scale:this.scale}))},t}(),p=function(){function t(t,e,n){this.element=t,this.pan=e,this.options=n}return t.prototype.handleMouseDown=function(t){t.preventDefault(),t.stopPropagation();var e=c(t,null,!0);this.state={moved:!1,x:e.clientX,y:e.clientY,dx:0,dy:0,scale:1},document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)},t.prototype.handleMouseMove=function(t){t.preventDefault(),t.stopPropagation();var e=c(t,null,!0),n=e.clientX-this.state.x,o=e.clientY-this.state.y;this.state.moved=!0,this.state.dx=n,this.state.dy=o,this.pan.handlePan(n,o)},t.prototype.handleMouseUp=function(t){t.preventDefault(),t.stopPropagation(),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.state.moved&&this.pan.handlePanEnd(this.state.dx,this.state.dy)},t.prototype.destroy=function(){this.element.removeEventListener("mousedown",this.handleMouseDown)},t}(),d=function(){function t(t,e,n){this.element=t,this.pan=e,this.options=n}return t.prototype.handleTouchStart=function(t){t.preventDefault(),t.stopPropagation();var e=t.touches[0],n=c(e,null,!0);this.state={moved:!1,x:n.clientX,y:n.clientY,dx:0,dy:0,scale:1},document.addEventListener("touchmove",this.handleTouchMove,{passive:!1}),document.addEventListener("touchend",this.handleTouchEnd)},t.prototype.handleTouchMove=function(t){t.preventDefault(),t.stopPropagation();var e=t.touches[0],n=c(e,null,!0),o=n.clientX-this.state.x,i=n.clientY-this.state.y;this.state.moved=!0,this.state.dx=o,this.state.dy=i,this.pan.handlePan(o,i)},t.prototype.handleTouchEnd=function(t){t.preventDefault(),t.stopPropagation(),document.removeEventListener("touchmove",this.handleTouchMove),document.removeEventListener("touchend",this.handleTouchEnd),this.state.moved&&this.pan.handlePanEnd(this.state.dx,this.state.dy)},t.prototype.destroy=function(){this.element.removeEventListener("touchstart",this.handleTouchStart)},t}(),v=function(){function t(t,e,n){this.element=t,this.pan=e,this.options=n}return t.prototype.handleWheel=function(t){t.preventDefault(),t.stopPropagation();var e=t.deltaY;0!==e&&this.pan.handleWheel(e)},t.prototype.destroy=function(){this.element.removeEventListener("wheel",this.handleWheel)},t}(),y=function(){function t(t,e){this.element=t,this.options=e,this.state={x:0,y:0,scale:1},this.handlers={mouse:new p(t,this,e),touch:new d(t,this,e),wheel:new v(t,this,e)}}return t.prototype.handlePan=function(t,e){var n=this.state.x+t,o=this.state.y+e;this.options.onPan&&this.options.onPan(n,o),this.state.x=n,this.state.y=o},t.prototype.handlePanEnd=function(t,e){this.options.onPanEnd&&this.options.onPanEnd(this.state.x,this.state.y)},t.prototype.handleWheel=function(t){var e=this.state.scale*(1-t/1e3);e=Math.max(this.options.minScale||0,Math.min(this.options.maxScale||1/0,e)),this.options.onZoom&&this.options.onZoom(e),this.state.scale=e},t.prototype.destroy=function(){this.handlers.mouse.destroy(),this.handlers.touch.destroy(),this.handlers.wheel.destroy()},t}();function s(t,e){return void 0===e&&(e={}),new y(t,e)}return s.version="9.4.0",s}); 